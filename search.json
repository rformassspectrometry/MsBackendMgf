[{"path":"https://rformassspectrometry.github.io/MsBackendMgf/articles/MsBackendMgf.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Description and usage of MsBackendMgf","text":"Spectra package provides central infrastructure handling Mass Spectrometry (MS) data. package supports interchangeable use different backends import MS data variety sources (mzML files). MsBackendMgf package allows import MS/MS data mgf (Mascot Generic Format) files. vignette illustrates usage MsBackendMgf package.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/articles/MsBackendMgf.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Description and usage of MsBackendMgf","text":"install package, start R enter: install package eventually missing dependencies.","code":"if (!requireNamespace(\"BiocManager\", quietly = TRUE))     install.packages(\"BiocManager\")  BiocManager::install(\"MsBackendMgf\")"},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/articles/MsBackendMgf.html","id":"importing-msms-data-from-mgf-files","dir":"Articles","previous_headings":"","what":"Importing MS/MS data from mgf files","title":"Description and usage of MsBackendMgf","text":"Mgf files store one multiple spectra, typically centroided MS level 2. short example , load 2 mgf files provided package. first load required packages define paths mgf files. MS data can accessed analyzed Spectra objects. create Spectra data mgf files. end provide file names specify use MsBackendMgf() backend source enable data import. Note also disable parallel processing specifically registering serial processing default. See ?bpparam details parallel processing options BiocParallel package. now full access imported spectra variables list . Besides default spectra variables, msLevel, rtime, precursorMz, also additional spectra variables TITLE spectrum mgf file. default, fields mgf file mapped spectra variable names using mapping returned spectraVariableMapping function: names character vector spectra variable names (\"rtime\") field mgf file contains information values (\"RTINSECONDS\"). Note also possible overwrite mapping (e.g. certain mgf dialects) add additional mappings. add mapping mgf field \"TITLE\" spectra variable called \"spectrumName\". can pass mapping backendInitialize method, Spectra constructor. can now access spectrum’s title newly created spectra variable \"spectrumName\": addition can also access m/z intensity values spectrum. MsBackendMgf backend allows also export data mgf format. export data temporary file. hence call export function Spectra object specifying backend = MsBackendMgf() use backend export data. Note use custom mapping variables spectra variable \"spectrumName\" exported spectrums’ title. next read first lines exported file verify title exported properly. Note MsBackendMgf exports spectra variables fields mgf file. illustrate add new spectra variable object export data. can see also newly defined variable exported. Also, provide custom variable mapping time, variable \"spectrumName\" used spectrum’s title. Sometimes might required export spectra variables since exported fields might recognized/supported external tools. Using selectSpectraVariables function can reduce Spectra object export contain relevant spectra variables. restrict data m/z, intensity, retention time, acquisition number, precursor m/z precursor charge export mgf file. Also, external tools don’t support \"TITLE\" field MGF file. disable export spectrum ID/title exportTitle = FALSE can used.","code":"library(Spectra) library(MsBackendMgf)  fls <- dir(system.file(\"extdata\", package = \"MsBackendMgf\"),            full.names = TRUE, pattern = \"mgf$\") fls ## [1] \"/__w/_temp/Library/MsBackendMgf/extdata/spectra.mgf\"              ## [2] \"/__w/_temp/Library/MsBackendMgf/extdata/spectra2.mgf\"             ## [3] \"/__w/_temp/Library/MsBackendMgf/extdata/spectra3_empty_peaks.mgf\" library(BiocParallel) register(SerialParam())  sps <- Spectra(fls, source = MsBackendMgf()) ## Start data import from 3 files ... done spectraVariables(sps) ##  [1] \"msLevel\"                 \"rtime\"                   ##  [3] \"acquisitionNum\"          \"scanIndex\"               ##  [5] \"dataStorage\"             \"dataOrigin\"              ##  [7] \"centroided\"              \"smoothed\"                ##  [9] \"polarity\"                \"precScanNum\"             ## [11] \"precursorMz\"             \"precursorIntensity\"      ## [13] \"precursorCharge\"         \"collisionEnergy\"         ## [15] \"isolationWindowLowerMz\"  \"isolationWindowTargetMz\" ## [17] \"isolationWindowUpperMz\"  \"TITLE\"                   ## [19] \"RAWFILE\"                 \"CLUSTER_ID\" sps$rtime ## [1] 1028.000 1117.000 1127.000 2678.940 2373.511 2511.030       NA  162.070 sps$TITLE ## [1] \"File193 Spectrum1719 scans: 2162\"                                                          ## [2] \"File193 Spectrum1944 scans: 2406\"                                                          ## [3] \"File193 Spectrum1968 scans: 2432\"                                                          ## [4] \"mzspec:PXD004732:01650b_BC2-TUM_first_pool_53_01_01-3xHCD-1h-R2:scan:41840:WNQLQAFWGTGK/2\" ## [5] \"mzspec:PXD002084:TCGA-AA-A01D-01A-23_W_VU_20121106_A0218_5I_R_FR15:scan:5209:DLTDYLMK/2\"   ## [6] \"mzspec:MSV000080679:j11962_C1orf144:scan:10671:DLTDYLMK/2\"                                 ## [7] \"CCMSLIB00000840351\"                                                                        ## [8] \"blank_2-A,1_01_29559.812.812.1\" spectraVariableMapping(MsBackendMgf()) ##              rtime     acquisitionNum        precursorMz precursorIntensity  ##      \"RTINSECONDS\"            \"SCANS\"          \"PEPMASS\"       \"PEPMASSINT\"  ##    precursorCharge  ##           \"CHARGE\" map <- c(spectrumName = \"TITLE\", spectraVariableMapping(MsBackendMgf())) map ##       spectrumName              rtime     acquisitionNum        precursorMz  ##            \"TITLE\"      \"RTINSECONDS\"            \"SCANS\"          \"PEPMASS\"  ## precursorIntensity    precursorCharge  ##       \"PEPMASSINT\"           \"CHARGE\" sps <- Spectra(fls, source = MsBackendMgf(), mapping = map) ## Start data import from 3 files ... done sps$spectrumName ## [1] \"File193 Spectrum1719 scans: 2162\"                                                          ## [2] \"File193 Spectrum1944 scans: 2406\"                                                          ## [3] \"File193 Spectrum1968 scans: 2432\"                                                          ## [4] \"mzspec:PXD004732:01650b_BC2-TUM_first_pool_53_01_01-3xHCD-1h-R2:scan:41840:WNQLQAFWGTGK/2\" ## [5] \"mzspec:PXD002084:TCGA-AA-A01D-01A-23_W_VU_20121106_A0218_5I_R_FR15:scan:5209:DLTDYLMK/2\"   ## [6] \"mzspec:MSV000080679:j11962_C1orf144:scan:10671:DLTDYLMK/2\"                                 ## [7] \"CCMSLIB00000840351\"                                                                        ## [8] \"blank_2-A,1_01_29559.812.812.1\" mz(sps) ## NumericList of length 8 ## [[1]] 102.0548 103.00494 103.03531 ... 1388.58691 1405.59729 1406.57666 ## [[2]] 101.07074 102.05486 103.00227 ... 1331.56726 1348.58496 1349.59241 ## [[3]] 102.05556 103.00014 115.05058 ... 1333.599 1334.61304 1335.64368 ## [[4]] 101.07122 109.68925 115.86999 120.0811 ... 1260.6073 1261.614 1272.6572 ## [[5]] 130.164459228516 144.150299072266 ... 1019.23852539062 1020.52404785156 ## [[6]] 110.070594787598 120.080627441406 ... 887.756652832031 998.447387695312 ## [[7]] 51.022404 57.033543 57.060638 ... 636.130188 660.481445 753.358521 ## [[8]] numeric(0) intensity(sps) ## NumericList of length 8 ## [[1]] 753.738 385.376 315.441 413.206 ... 3038.73 2016.43 1146.04 704.175 ## [[2]] 1228.93 1424.66 1550.9 1455.45 ... 7380.41 4960.92 5743.83 1780.76 ## [[3]] 1340.44 1714.76 1938.82 1450.36 2019 ... 5323.02 2265.43 4768.14 1532.12 ## [[4]] 81011.57 4123.349 4006.9321 66933.17 ... 22042.248 18096.48 12666.438 ## [[5]] 14.1766004562378 18.5806427001953 ... 22.7096385955811 14.864013671875 ## [[6]] 1748.57495117188 8689.9951171875 ... 2907.08422851562 2663.30908203125 ## [[7]] 65.219513 178.758606 13.01786 119.898499 ... 22.05921 30.57095 14.11111 ## [[8]] numeric(0) fl <- tempfile() export(sps, backend = MsBackendMgf(), file = fl, mapping = map) readLines(fl)[1:12] ##  [1] \"BEGIN IONS\"                             ##  [2] \"msLevel=2\"                              ##  [3] \"RTINSECONDS=1028\"                       ##  [4] \"SCANS=2162\"                             ##  [5] \"centroided=TRUE\"                        ##  [6] \"PEPMASS=816.33826\"                      ##  [7] \"CHARGE=2+\"                              ##  [8] \"TITLE=File193 Spectrum1719 scans: 2162\" ##  [9] \"102.0548 753.738\"                       ## [10] \"103.00494 385.376\"                      ## [11] \"103.03531 315.441\"                      ## [12] \"115.05001 413.206\" sps$new_variable <- \"A\" export(sps, backend = MsBackendMgf(), file = fl) readLines(fl)[1:12] ##  [1] \"BEGIN IONS\"                                    ##  [2] \"TITLE=msLevel 2; retentionTime ; scanNum \"     ##  [3] \"msLevel=2\"                                     ##  [4] \"RTINSECONDS=1028\"                              ##  [5] \"SCANS=2162\"                                    ##  [6] \"centroided=TRUE\"                               ##  [7] \"PEPMASS=816.33826\"                             ##  [8] \"CHARGE=2+\"                                     ##  [9] \"spectrumName=File193 Spectrum1719 scans: 2162\" ## [10] \"new_variable=A\"                                ## [11] \"102.0548 753.738\"                              ## [12] \"103.00494 385.376\" sps_ex <- selectSpectraVariables(sps, c(\"mz\", \"intensity\", \"rtime\",                                         \"acquisitionNum\", \"precursorMz\",                                         \"precursorCharge\")) export(sps_ex, backend = MsBackendMgf(), file = fl, exportTitle = FALSE) readLines(fl)[1:12] ##  [1] \"BEGIN IONS\"        \"RTINSECONDS=1028\"  \"SCANS=2162\"        ##  [4] \"PEPMASS=816.33826\" \"CHARGE=2+\"         \"102.0548 753.738\"  ##  [7] \"103.00494 385.376\" \"103.03531 315.441\" \"115.05001 413.206\" ## [10] \"115.08686 588.273\" \"120.08063 800.016\" \"124.10555 526.761\""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/articles/MsBackendMgf.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Description and usage of MsBackendMgf","text":"","code":"sessionInfo() ## R Under development (unstable) (2023-01-26 r83699) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 22.04.1 LTS ##  ## Matrix products: default ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 ##  ## locale: ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                  ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C             ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C        ##  ## time zone: UTC ## tzcode source: system (glibc) ##  ## attached base packages: ## [1] stats4    stats     graphics  grDevices utils     datasets  methods   ## [8] base      ##  ## other attached packages: ## [1] MsBackendMgf_1.7.4  Spectra_1.9.7       ProtGenerics_1.29.1 ## [4] BiocParallel_1.33.9 S4Vectors_0.37.3    BiocGenerics_0.45.0 ## [7] BiocStyle_2.27.1    ##  ## loaded via a namespace (and not attached): ##  [1] jsonlite_1.8.4      compiler_4.3.0      BiocManager_1.30.19 ##  [4] stringr_1.5.0       parallel_4.3.0      cluster_2.1.4       ##  [7] jquerylib_0.1.4     IRanges_2.33.0      systemfonts_1.0.4   ## [10] textshaping_0.3.6   yaml_2.3.7          fastmap_1.1.0       ## [13] R6_2.5.1            knitr_1.42          MASS_7.3-58.2       ## [16] bookdown_0.32       desc_1.4.2          rprojroot_2.0.3     ## [19] bslib_0.4.2         rlang_1.0.6         cachem_1.0.6        ## [22] stringi_1.7.12      xfun_0.36           MsCoreUtils_1.11.3  ## [25] fs_1.6.0            sass_0.4.5          memoise_2.0.1       ## [28] cli_3.6.0           pkgdown_2.0.7.9000  magrittr_2.0.3      ## [31] digest_0.6.31       clue_0.3-63         lifecycle_1.0.3     ## [34] vctrs_0.5.2         evaluate_0.20       glue_1.6.2          ## [37] codetools_0.2-18    ragg_1.2.5          rmarkdown_2.20      ## [40] purrr_1.0.1         tools_4.3.0         htmltools_0.5.4"},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"RforMassSpectrometry Package Maintainer. Maintainer. Laurent Gatto. Author. Johannes Rainer. Author. Sebastian Gibb. Author. Michael Witting. Contributor.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gatto L, Rainer J, Gibb S (2023). MsBackendMgf: Mass Spectrometry Data Backend Mascot Generic Format (mgf) Files. R package version 1.7.4, https://github.com/RforMassSpectrometry/MsBackendMgf.","code":"@Manual{,   title = {MsBackendMgf: Mass Spectrometry Data Backend for Mascot Generic Format (mgf) Files},   author = {Laurent Gatto and Johannes Rainer and Sebastian Gibb},   year = {2023},   note = {R package version 1.7.4},   url = {https://github.com/RforMassSpectrometry/MsBackendMgf}, }"},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/index.html","id":"mass-spectrometry-data-backend-for-mascot-generic-format-mgf-files","dir":"","previous_headings":"","what":"Mass Spectrometry Data Backend for Mascot Generic Format (mgf) Files","title":"Mass Spectrometry Data Backend for Mascot Generic Format (mgf) Files","text":"MsBackendMgf package provides functionality import handle MS/MS spectrum data Mascot Generic Format (mgf) files. package defines MsBackendMgf backend can used import use MS2 spectrum data mgf files Spectra R package. information see package homepage.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/MsBackendMgf.html","id":null,"dir":"Reference","previous_headings":"","what":"MS data backend for mgf files — MsBackendMgf","title":"MS data backend for mgf files — MsBackendMgf","text":"MsBackendMgf class supports import export MS/MS spectra data /files Mascot Generic Format (mgf) files. initial import, full MS data kept memory. MsBackendMgf extends MsBackendDataFrame() backend directly supports thus applyProcessing() function make data manipulations persistent. New objects created MsBackendMgf function. backendInitialize method subsequently called initialize object import MS/MS data (one ) mgf files. MsBackendMgf backend provides export method allows export data Spectra object (parameter x) file mgf format. See package vignette details examples. Default mappings fields MGF file spectra variable names provided spectraVariableMapping function. function returns named character vector names spectra variable names values respective field names MGF files. named character vector submitted import export function parameter mapping. also possible pass mappings (e.g. special MGF dialects) mapping parameter.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/MsBackendMgf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MS data backend for mgf files — MsBackendMgf","text":"","code":"# S4 method for MsBackendMgf backendInitialize(   object,   files,   mapping = spectraVariableMapping(object),   ...,   BPPARAM = bpparam() )  MsBackendMgf()  # S4 method for MsBackendMgf spectraVariableMapping(object, format = c(\"mgf\"))  # S4 method for MsBackendMgf export(   object,   x,   file = tempfile(),   mapping = spectraVariableMapping(object),   exportTitle = TRUE,   ... )"},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/MsBackendMgf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MS data backend for mgf files — MsBackendMgf","text":"object Instance MsBackendMgf class. files character (full) file name(s) mgf file(s) MS/MS data imported. mapping backendInitialize export: named character vector allowing specify fields MGF file renamed. Names supposed spectra variable name values vector field names MGF file. See output spectraVariableMapping() expected format examples description details. ... Currently ignored. BPPARAM Parameter object defining parallel processing setup import data parallel. Defaults BPPARAM = bpparam(). See bpparam() information. format spectraVariableMapping: character(1) defining format used. Currently format = \"mgf\" supported. x export: instance Spectra() class data exported. file character(1) (full) file name data exported. exportTitle logical(1) whether TITLE field included exported MGF file. TRUE (default) spectraVariable called \"TITLE\" used, variable present either spectraNames(object) used , empty, title generated including MS level, retention time acquisition number spectrum.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/MsBackendMgf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MS data backend for mgf files — MsBackendMgf","text":"See description .","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/MsBackendMgf.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"MS data backend for mgf files — MsBackendMgf","text":"Laurent Gatto Johannes Rainer","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/MsBackendMgf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MS data backend for mgf files — MsBackendMgf","text":"","code":"library(BiocParallel) fls <- dir(system.file(\"extdata\", package = \"MsBackendMgf\"),     full.names = TRUE, pattern = \"mgf$\")  ## Parallel processing setup: disabling parallel processing by registering ## serial processing. See ?bbparam for details and other options register(SerialParam())  ## Create an MsBackendMgf backend and import data from test mgf files. be <- backendInitialize(MsBackendMgf(), fls) #> Start data import from 3 files ...  #> done be #> MsBackendMgf with 8 spectra #>     msLevel     rtime scanIndex #>   <integer> <numeric> <integer> #> 1         2   1028.00        NA #> 2         2   1117.00        NA #> 3         2   1127.00        NA #> 4         2   2678.94        NA #> 5         2   2373.51        NA #> 6         2   2511.03        NA #> 7         2        NA        NA #> 8         2    162.07        NA #>  ... 19 more variables/columns.  be$msLevel #> [1] 2 2 2 2 2 2 2 2 be$intensity #> NumericList of length 8 #> [[1]] 753.738 385.376 315.441 413.206 ... 3038.73 2016.43 1146.04 704.175 #> [[2]] 1228.93 1424.66 1550.9 1455.45 ... 7380.41 4960.92 5743.83 1780.76 #> [[3]] 1340.44 1714.76 1938.82 1450.36 2019 ... 5323.02 2265.43 4768.14 1532.12 #> [[4]] 81011.57 4123.349 4006.9321 66933.17 ... 22042.248 18096.48 12666.438 #> [[5]] 14.1766004562378 18.5806427001953 ... 22.7096385955811 14.864013671875 #> [[6]] 1748.57495117188 8689.9951171875 ... 2907.08422851562 2663.30908203125 #> [[7]] 65.219513 178.758606 13.01786 119.898499 ... 22.05921 30.57095 14.11111 #> [[8]] numeric(0) be$mz #> NumericList of length 8 #> [[1]] 102.0548 103.00494 103.03531 ... 1388.58691 1405.59729 1406.57666 #> [[2]] 101.07074 102.05486 103.00227 ... 1331.56726 1348.58496 1349.59241 #> [[3]] 102.05556 103.00014 115.05058 ... 1333.599 1334.61304 1335.64368 #> [[4]] 101.07122 109.68925 115.86999 120.0811 ... 1260.6073 1261.614 1272.6572 #> [[5]] 130.164459228516 144.150299072266 ... 1019.23852539062 1020.52404785156 #> [[6]] 110.070594787598 120.080627441406 ... 887.756652832031 998.447387695312 #> [[7]] 51.022404 57.033543 57.060638 ... 636.130188 660.481445 753.358521 #> [[8]] numeric(0)  ## The spectra variables that are available; note that not all of them ## have been imported from the MGF files. spectraVariables(be) #>  [1] \"msLevel\"                 \"rtime\"                   #>  [3] \"acquisitionNum\"          \"scanIndex\"               #>  [5] \"mz\"                      \"intensity\"               #>  [7] \"dataStorage\"             \"dataOrigin\"              #>  [9] \"centroided\"              \"smoothed\"                #> [11] \"polarity\"                \"precScanNum\"             #> [13] \"precursorMz\"             \"precursorIntensity\"      #> [15] \"precursorCharge\"         \"collisionEnergy\"         #> [17] \"isolationWindowLowerMz\"  \"isolationWindowTargetMz\" #> [19] \"isolationWindowUpperMz\"  \"TITLE\"                   #> [21] \"RAWFILE\"                 \"CLUSTER_ID\"               ## The variable \"TITLE\" represents the title of the spectrum defined in the ## MGF file be$TITLE #> [1] \"File193 Spectrum1719 scans: 2162\"                                                          #> [2] \"File193 Spectrum1944 scans: 2406\"                                                          #> [3] \"File193 Spectrum1968 scans: 2432\"                                                          #> [4] \"mzspec:PXD004732:01650b_BC2-TUM_first_pool_53_01_01-3xHCD-1h-R2:scan:41840:WNQLQAFWGTGK/2\" #> [5] \"mzspec:PXD002084:TCGA-AA-A01D-01A-23_W_VU_20121106_A0218_5I_R_FR15:scan:5209:DLTDYLMK/2\"   #> [6] \"mzspec:MSV000080679:j11962_C1orf144:scan:10671:DLTDYLMK/2\"                                 #> [7] \"CCMSLIB00000840351\"                                                                        #> [8] \"blank_2-A,1_01_29559.812.812.1\"                                                             ## The default mapping of MGF fields to spectra variables is provided by ## the spectraVariableMapping function spectraVariableMapping(MsBackendMgf()) #>              rtime     acquisitionNum        precursorMz precursorIntensity  #>      \"RTINSECONDS\"            \"SCANS\"          \"PEPMASS\"       \"PEPMASSINT\"  #>    precursorCharge  #>           \"CHARGE\"   ## We can provide our own mapping e.g. to map the MGF field \"TITLE\" to a ## variable named \"spectrumName\": map <- c(spectrumName = \"TITLE\", spectraVariableMapping(MsBackendMgf())) map #>       spectrumName              rtime     acquisitionNum        precursorMz  #>            \"TITLE\"      \"RTINSECONDS\"            \"SCANS\"          \"PEPMASS\"  #> precursorIntensity    precursorCharge  #>       \"PEPMASSINT\"           \"CHARGE\"   ## We can then pass this mapping with parameter `mapping` to the ## backendInitialize method: be <- backendInitialize(MsBackendMgf(), fls, mapping = map) #> Start data import from 3 files ...  #> done  ## The title is now available as variable named spectrumName be$spectrumName #> [1] \"File193 Spectrum1719 scans: 2162\"                                                          #> [2] \"File193 Spectrum1944 scans: 2406\"                                                          #> [3] \"File193 Spectrum1968 scans: 2432\"                                                          #> [4] \"mzspec:PXD004732:01650b_BC2-TUM_first_pool_53_01_01-3xHCD-1h-R2:scan:41840:WNQLQAFWGTGK/2\" #> [5] \"mzspec:PXD002084:TCGA-AA-A01D-01A-23_W_VU_20121106_A0218_5I_R_FR15:scan:5209:DLTDYLMK/2\"   #> [6] \"mzspec:MSV000080679:j11962_C1orf144:scan:10671:DLTDYLMK/2\"                                 #> [7] \"CCMSLIB00000840351\"                                                                        #> [8] \"blank_2-A,1_01_29559.812.812.1\"                                                             ## Next we create a Spectra object with this data sps <- Spectra(be)  ## We can use the 'MsBackendMgf' also to export spectra data in mgf format. out_file <- tempfile() export(sps, backend = MsBackendMgf(), file = out_file, map = map)  ## The first 20 lines of the generated file: readLines(out_file, n = 20) #>  [1] \"BEGIN IONS\"                             #>  [2] \"msLevel=2\"                              #>  [3] \"RTINSECONDS=1028\"                       #>  [4] \"SCANS=2162\"                             #>  [5] \"centroided=TRUE\"                        #>  [6] \"PEPMASS=816.33826\"                      #>  [7] \"CHARGE=2+\"                              #>  [8] \"TITLE=File193 Spectrum1719 scans: 2162\" #>  [9] \"102.0548 753.738\"                       #> [10] \"103.00494 385.376\"                      #> [11] \"103.03531 315.441\"                      #> [12] \"115.05001 413.206\"                      #> [13] \"115.08686 588.273\"                      #> [14] \"120.08063 800.016\"                      #> [15] \"124.10555 526.761\"                      #> [16] \"124.20652 326.013\"                      #> [17] \"1369.57385 1485.17\"                     #> [18] \"1370.57495 1280.2\"                      #> [19] \"1387.59021 3038.73\"                     #> [20] \"1388.58691 2016.43\"                      ## Next we add a new spectra variable to each spectrum sps$spectrum_idx <- seq_along(sps)  ## This new spectra variable will also be exported to the mgf file: export(sps, backend = MsBackendMgf(), file = out_file, map = map) readLines(out_file, n = 20) #>  [1] \"BEGIN IONS\"                             #>  [2] \"msLevel=2\"                              #>  [3] \"RTINSECONDS=1028\"                       #>  [4] \"SCANS=2162\"                             #>  [5] \"centroided=TRUE\"                        #>  [6] \"PEPMASS=816.33826\"                      #>  [7] \"CHARGE=2+\"                              #>  [8] \"TITLE=File193 Spectrum1719 scans: 2162\" #>  [9] \"spectrum_idx=1\"                         #> [10] \"102.0548 753.738\"                       #> [11] \"103.00494 385.376\"                      #> [12] \"103.03531 315.441\"                      #> [13] \"115.05001 413.206\"                      #> [14] \"115.08686 588.273\"                      #> [15] \"120.08063 800.016\"                      #> [16] \"124.10555 526.761\"                      #> [17] \"124.20652 326.013\"                      #> [18] \"1369.57385 1485.17\"                     #> [19] \"1370.57495 1280.2\"                      #> [20] \"1387.59021 3038.73\""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/hidden_aliases.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal page for hidden aliases — hidden_aliases","title":"Internal page for hidden aliases — hidden_aliases","text":"S4 methods require documentation entry clutter index.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/readMgf.html","id":null,"dir":"Reference","previous_headings":"","what":"Reading MGF files — readMgf","title":"Reading MGF files — readMgf","text":"readMgf function imports data file MGF format reading specified fields returning data DataFrame().","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/readMgf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reading MGF files — readMgf","text":"","code":"readMgf(f, msLevel = 2L, mapping = spectraVariableMapping(MsBackendMgf()), ...)"},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/readMgf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reading MGF files — readMgf","text":"f character(1) path mgf file. msLevel numeric(1) MS level. Default 2. mapping named character vector rename mgf fields spectra variables. ... Additional parameters, currently ignored.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/readMgf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reading MGF files — readMgf","text":"DataFrame row containing data one spectrum MGF file. m/z intensity values available columns \"mz\" \"intensity\" list representation.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/readMgf.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Reading MGF files — readMgf","text":"Laurent Gatto, Johannes Rainer","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/reference/readMgf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reading MGF files — readMgf","text":"","code":"fls <- dir(system.file(\"extdata\", package = \"MsBackendMgf\"),     full.names = TRUE, pattern = \"mgf$\")[1L]  readMgf(fls) #> DataFrame with 3 rows and 10 columns #>                    TITLE precursorMz precursorCharge     rtime acquisitionNum #>              <character>   <numeric>       <integer> <numeric>      <integer> #> 1 File193 Spectrum1719..     816.338               2      1028           2162 #> 2 File193 Spectrum1944..     787.828               2      1117           2406 #> 3 File193 Spectrum1968..     780.840               2      1127           2432 #>   precursorIntensity                          mz                   intensity #>            <numeric>               <NumericList>               <NumericList> #> 1                 NA 102.055,103.005,103.035,... 753.738,385.376,315.441,... #> 2             880650 101.071,102.055,103.002,... 1228.93,1424.66,1550.90,... #> 3            1265631 102.056,103.000,115.051,... 1340.44,1714.76,1938.82,... #>               dataOrigin   msLevel #>              <character> <integer> #> 1 /__w/_temp/Library/M..         2 #> 2 /__w/_temp/Library/M..         2 #> 3 /__w/_temp/Library/M..         2"},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-7","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.4","title":"MsBackendMgf 1.7","text":"Fix bug import m/z values sorted.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-7-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.3","title":"MsBackendMgf 1.7","text":"Enforce m/z values increasingly ordered importing.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-7-2","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.2","title":"MsBackendMgf 1.7","text":"Run full unit test suite Spectra package check validity MsBackendMgf.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-7-3","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.1","title":"MsBackendMgf 1.7","text":"Use compress = FALSE NumericList.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-7-4","dir":"Changelog","previous_headings":"","what":"Changes in 1.7.0","title":"MsBackendMgf 1.7","text":"Bioconductor 3.17 developmental branch.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-5","dir":"Changelog","previous_headings":"","what":"Changes in 1.5.1","title":"MsBackendMgf 1.5","text":"Fix export method fail one columns contain either S4 classes list-like structures.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-3","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.3","title":"MsBackendMgf 1.3","text":"Import coreSpectraVariables Spectra.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-3-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.2","title":"MsBackendMgf 1.3","text":"Adapt spectraVariableMapping Spectra version >= 1.5.8.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-3-2","dir":"Changelog","previous_headings":"","what":"Changes in 1.3.1","title":"MsBackendMgf 1.3","text":"Run additional unit test suits defined Spectra.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.3","title":"MsBackendMgf 1.1","text":"Fix issue MGF files lacking peak data.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-1-1","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.2","title":"MsBackendMgf 1.1","text":"Export precursor charge expected format (issue #16).","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-1-1-2","dir":"Changelog","previous_headings":"","what":"Changes in 1.1.1","title":"MsBackendMgf 1.1","text":"Add example vignette describing export selected spectra variables MGF file.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-0-99","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.3","title":"MsBackendMgf 0.99","text":"Export readMgf function.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-0-99-1","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.2","title":"MsBackendMgf 0.99","text":"Update installation description vignette.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-0-99-2","dir":"Changelog","previous_headings":"","what":"Changes in 0.99.1","title":"MsBackendMgf 0.99","text":"Directly call internal function MsBackendMgf avoid parallel processing error (function found) Windows.","code":""},{"path":[]},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-0-2","dir":"Changelog","previous_headings":"","what":"Changes in 0.2.2","title":"MsBackendMgf 0.2","text":"Add examples use MsBackendMgf backend export data mgf files (issue #4.","code":""},{"path":"https://rformassspectrometry.github.io/MsBackendMgf/news/index.html","id":"changes-in-0-2-1","dir":"Changelog","previous_headings":"","what":"Changes in 0.2.0","title":"MsBackendMgf 0.2","text":"Add export method support exporting data Spectra object mgf file format. Import fields MGF file. Rename MGF field names spectra variables based spectraVariableMapping. Support MGF files different field names.","code":""}]
