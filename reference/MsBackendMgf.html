<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MS data backend for mgf files — MsBackendMgf • MsBackendMgf</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="MS data backend for mgf files — MsBackendMgf" />
<meta property="og:description" content="The MsBackendMgf class supports import and export of MS/MS spectra data
from/to files in Mascot Generic Format
(mgf)
files. After initial import, the full MS data is kept in
memory. MsBackendMgf extends the MsBackendDataFrame() backend
directly and supports thus the applyProcessing() function to make
data manipulations persistent.
New objects are created with the MsBackendMgf function. The
backendInitialize method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) mgf
files.
The MsBackendMgf backend provides an export method that allows to export
the data from the Spectra object (parameter x) to a file in mgf format.
See the package vignette for details and examples.
Default mappings from fields in the MGF file to spectra variable names are
provided by the spectraVariableMapping function. This function returns a
named character vector were names are the spectra variable names and the
values the respective field names in the MGF files. This named character
vector is submitted to the import and export function with parameter
mapping. It is also possible to pass own mappings (e.g. for special
MGF dialects) with the mapping parameter." />
<meta property="og:image" content="/logo.png" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MsBackendMgf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/MsBackendMgf.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RforMassSpectrometry/MsBackendMgf/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MS data backend for mgf files</h1>
    <small class="dont-index">Source: <a href='https://github.com/RforMassSpectrometry/MsBackendMgf/blob/master/R/MsBackendMgf.R'><code>R/MsBackendMgf.R</code></a></small>
    <div class="hidden name"><code>MsBackendMgf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>MsBackendMgf</code> class supports import and export of MS/MS spectra data
from/to files in Mascot Generic Format
(<a href='http://www.matrixscience.com/help/data_file_help.html'>mgf</a>)
files. After initial import, the full MS data is kept in
memory. <code>MsBackendMgf</code> extends the <code>MsBackendDataFrame()</code> backend
directly and supports thus the <code>applyProcessing()</code> function to make
data manipulations persistent.</p>
<p>New objects are created with the <code>MsBackendMgf</code> function. The
<code>backendInitialize</code> method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) mgf
files.</p>
<p>The <code>MsBackendMgf</code> backend provides an <code>export</code> method that allows to export
the data from the <code>Spectra</code> object (parameter <code>x</code>) to a file in mgf format.
See the package vignette for details and examples.</p>
<p>Default mappings from fields in the MGF file to spectra variable names are
provided by the <code>spectraVariableMapping</code> function. This function returns a
named character vector were names are the spectra variable names and the
values the respective field names in the MGF files. This named character
vector is submitted to the import and export function with parameter
<code>mapping</code>. It is also possible to pass own mappings (e.g. for special
MGF dialects) with the <code>mapping</code> parameter.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='co'># S4 method for MsBackendMgf</span>
<span class='fu'>backendInitialize</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>files</span>,
  mapping <span class='op'>=</span> <span class='fu'>spectraVariableMapping</span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>,
  BPPARAM <span class='op'>=</span> <span class='fu'>bpparam</span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>MsBackendMgf</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>spectraVariableMapping</span><span class='op'>(</span>format <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mgf"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># S4 method for MsBackendMgf</span>
<span class='fu'>export</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>x</span>, file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span>, mapping <span class='op'>=</span> <span class='fu'>spectraVariableMapping</span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>Instance of <code>MsBackendMgf</code> class.</p></td>
    </tr>
    <tr>
      <th>files</th>
      <td><p><code>character</code> with the (full) file name(s) of the mgf file(s)
from which MS/MS data should be imported.</p></td>
    </tr>
    <tr>
      <th>mapping</th>
      <td><p>for <code>backendInitialize</code> and <code>export</code>: named <code>character</code> vector
allowing to specify how fields from the MGF file should be renamed. Names
are supposed to be the spectra variable name and values of the vector
the field names in the MGF file. See output of <code>spectraVariableMapping()</code>
for the expected format and examples below or description above for
details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently ignored.</p></td>
    </tr>
    <tr>
      <th>BPPARAM</th>
      <td><p>Parameter object defining the parallel processing
setup to import data in parallel. Defaults to <code>BPPARAM = bpparam()</code>. See <code>bpparam()</code> for more information.</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>for <code>spectraVariableMapping</code>: <code>character(1)</code> defining the
format to be used. Currently only <code>format = "mgf"</code> is supported.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>for <code>export</code>: an instance of <code>Spectra()</code> class with the data that
should be exported.</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p><code>character(1)</code> with the (full) file name to which the data
should be exported.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>See description above.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Laurent Gatto and Johannes Rainer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/Bioconductor/BiocParallel'>BiocParallel</a></span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>fls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>dir</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, package <span class='op'>=</span> <span class='st'>"MsBackendMgf"</span><span class='op'>)</span>,</span>
<span class='r-in'>    full.names <span class='op'>=</span> <span class='cn'>TRUE</span>, pattern <span class='op'>=</span> <span class='st'>"mgf$"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Parallel processing setup: disabling parallel processing by registering</span></span>
<span class='r-in'><span class='co'>## serial processing. See ?bbparam for details and other options</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/pkg/BiocParallel/man/register.html'>register</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/BiocParallel/man/SerialParam-class.html'>SerialParam</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Create an MsBackendMgf backend and import data from test mgf files.</span></span>
<span class='r-in'><span class='va'>be</span> <span class='op'>&lt;-</span> <span class='fu'>backendInitialize</span><span class='op'>(</span><span class='fu'>MsBackendMgf</span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>fls</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Start data import from 2 files ... </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> done</span>
<span class='r-in'><span class='va'>be</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> MsBackendMgf with 7 spectra</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     msLevel     rtime scanIndex</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1         2   1028.00        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2         2   1117.00        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3         2   1127.00        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4         2   2678.94        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5         2   2373.51        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6         2   2511.03        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 7         2        NA        NA</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  ... 17 more variables/columns.</span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>be</span><span class='op'>$</span><span class='va'>msLevel</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 2 2 2 2 2 2 2</span>
<span class='r-in'><span class='va'>be</span><span class='op'>$</span><span class='va'>intensity</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NumericList of length 7</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[1]] 753.738 385.376 315.441 413.206 ... 3038.73 2016.43 1146.04 704.175</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[2]] 1228.93 1424.66 1550.9 1455.45 ... 7380.41 4960.92 5743.83 1780.76</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[3]] 1340.44 1714.76 1938.82 1450.36 2019 ... 5323.02 2265.43 4768.14 1532.12</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[4]] 81011.57 4123.349 4006.9321 66933.17 ... 22042.248 18096.48 12666.438</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[5]] 14.1766004562378 18.5806427001953 ... 22.7096385955811 14.864013671875</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[6]] 1748.57495117188 8689.9951171875 ... 2907.08422851562 2663.30908203125</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[7]] 65.219513 178.758606 13.01786 119.898499 ... 22.05921 30.57095 14.11111</span>
<span class='r-in'><span class='va'>be</span><span class='op'>$</span><span class='va'>mz</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> NumericList of length 7</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[1]] 102.0548 103.00494 103.03531 ... 1388.58691 1405.59729 1406.57666</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[2]] 101.07074 102.05486 103.00227 ... 1331.56726 1348.58496 1349.59241</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[3]] 102.05556 103.00014 115.05058 ... 1333.599 1334.61304 1335.64368</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[4]] 101.07122 109.68925 115.86999 120.0811 ... 1260.6073 1261.614 1272.6572</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[5]] 130.164459228516 144.150299072266 ... 1019.23852539062 1020.52404785156</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[6]] 110.070594787598 120.080627441406 ... 887.756652832031 998.447387695312</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[7]] 51.022404 57.033543 57.060638 ... 636.130188 660.481445 753.358521</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The spectra variables that are available; note that not all of them</span></span>
<span class='r-in'><span class='co'>## have been imported from the MGF files.</span></span>
<span class='r-in'><span class='fu'>spectraVariables</span><span class='op'>(</span><span class='va'>be</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [1] "msLevel"                 "rtime"                  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [3] "acquisitionNum"          "scanIndex"              </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [5] "mz"                      "intensity"              </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [7] "dataStorage"             "dataOrigin"             </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [9] "centroided"              "smoothed"               </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [11] "polarity"                "precScanNum"            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [13] "precursorMz"             "precursorIntensity"     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [15] "precursorCharge"         "collisionEnergy"        </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [17] "isolationWindowLowerMz"  "isolationWindowTargetMz"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [19] "isolationWindowUpperMz"  "TITLE"                  </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The variable "TITLE" represents the title of the spectrum defined in the</span></span>
<span class='r-in'><span class='co'>## MGF file</span></span>
<span class='r-in'><span class='va'>be</span><span class='op'>$</span><span class='va'>TITLE</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "File193 Spectrum1719 scans: 2162"                                                         </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2] "File193 Spectrum1944 scans: 2406"                                                         </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3] "File193 Spectrum1968 scans: 2432"                                                         </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4] "mzspec:PXD004732:01650b_BC2-TUM_first_pool_53_01_01-3xHCD-1h-R2:scan:41840:WNQLQAFWGTGK/2"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [5] "mzspec:PXD002084:TCGA-AA-A01D-01A-23_W_VU_20121106_A0218_5I_R_FR15:scan:5209:DLTDYLMK/2"  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [6] "mzspec:MSV000080679:j11962_C1orf144:scan:10671:DLTDYLMK/2"                                </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [7] "CCMSLIB00000840351"                                                                       </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The default mapping of MGF fields to spectra variables is provided by</span></span>
<span class='r-in'><span class='co'>## the spectraVariableMapping function</span></span>
<span class='r-in'><span class='fu'>spectraVariableMapping</span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>              rtime     acquisitionNum        precursorMz precursorIntensity </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      "RTINSECONDS"            "SCANS"          "PEPMASS"       "PEPMASSINT" </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    precursorCharge </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>           "CHARGE" </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## We can provide our own mapping e.g. to map the MGF field "TITLE" to a</span></span>
<span class='r-in'><span class='co'>## variable named "spectrumName":</span></span>
<span class='r-in'><span class='va'>map</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>spectrumName <span class='op'>=</span> <span class='st'>"TITLE"</span>, <span class='fu'>spectraVariableMapping</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>map</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>       spectrumName              rtime     acquisitionNum        precursorMz </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>            "TITLE"      "RTINSECONDS"            "SCANS"          "PEPMASS" </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> precursorIntensity    precursorCharge </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>       "PEPMASSINT"           "CHARGE" </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## We can then pass this mapping with parameter `mapping` to the</span></span>
<span class='r-in'><span class='co'>## backendInitialize method:</span></span>
<span class='r-in'><span class='va'>be</span> <span class='op'>&lt;-</span> <span class='fu'>backendInitialize</span><span class='op'>(</span><span class='fu'>MsBackendMgf</span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>fls</span>, mapping <span class='op'>=</span> <span class='va'>map</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Start data import from 2 files ... </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> done</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The title is now available as variable named spectrumName</span></span>
<span class='r-in'><span class='va'>be</span><span class='op'>$</span><span class='va'>spectrumName</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "File193 Spectrum1719 scans: 2162"                                                         </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2] "File193 Spectrum1944 scans: 2406"                                                         </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3] "File193 Spectrum1968 scans: 2432"                                                         </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4] "mzspec:PXD004732:01650b_BC2-TUM_first_pool_53_01_01-3xHCD-1h-R2:scan:41840:WNQLQAFWGTGK/2"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [5] "mzspec:PXD002084:TCGA-AA-A01D-01A-23_W_VU_20121106_A0218_5I_R_FR15:scan:5209:DLTDYLMK/2"  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [6] "mzspec:MSV000080679:j11962_C1orf144:scan:10671:DLTDYLMK/2"                                </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [7] "CCMSLIB00000840351"                                                                       </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Next we create a Spectra object with this data</span></span>
<span class='r-in'><span class='va'>sps</span> <span class='op'>&lt;-</span> <span class='fu'>Spectra</span><span class='op'>(</span><span class='va'>be</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## We can use the 'MsBackendMgf' also to export spectra data in mgf format.</span></span>
<span class='r-in'><span class='va'>out_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>export</span><span class='op'>(</span><span class='va'>sps</span>, backend <span class='op'>=</span> <span class='fu'>MsBackendMgf</span><span class='op'>(</span><span class='op'>)</span>, file <span class='op'>=</span> <span class='va'>out_file</span>, map <span class='op'>=</span> <span class='va'>map</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## The first 20 lines of the generated file:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/readLines.html'>readLines</a></span><span class='op'>(</span><span class='va'>out_file</span>, n <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [1] "BEGIN IONS"                            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [2] "msLevel=2"                             </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [3] "RTINSECONDS=1028"                      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [4] "SCANS=2162"                            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [5] "centroided=TRUE"                       </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [6] "PEPMASS=816.33826"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [7] "CHARGE=2"                              </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [8] "TITLE=File193 Spectrum1719 scans: 2162"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [9] "102.0548 753.738"                      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [10] "103.00494 385.376"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [11] "103.03531 315.441"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [12] "115.05001 413.206"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [13] "115.08686 588.273"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [14] "120.08063 800.016"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [15] "124.10555 526.761"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [16] "124.20652 326.013"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [17] "1369.57385 1485.17"                    </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [18] "1370.57495 1280.2"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [19] "1387.59021 3038.73"                    </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [20] "1388.58691 2016.43"                    </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Next we add a new spectra variable to each spectrum</span></span>
<span class='r-in'><span class='va'>sps</span><span class='op'>$</span><span class='va'>spectrum_idx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>sps</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## This new spectra variable will also be exported to the mgf file:</span></span>
<span class='r-in'><span class='fu'>export</span><span class='op'>(</span><span class='va'>sps</span>, backend <span class='op'>=</span> <span class='fu'>MsBackendMgf</span><span class='op'>(</span><span class='op'>)</span>, file <span class='op'>=</span> <span class='va'>out_file</span>, map <span class='op'>=</span> <span class='va'>map</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/readLines.html'>readLines</a></span><span class='op'>(</span><span class='va'>out_file</span>, n <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [1] "BEGIN IONS"                            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [2] "msLevel=2"                             </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [3] "RTINSECONDS=1028"                      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [4] "SCANS=2162"                            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [5] "centroided=TRUE"                       </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [6] "PEPMASS=816.33826"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [7] "CHARGE=2"                              </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [8] "TITLE=File193 Spectrum1719 scans: 2162"</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  [9] "spectrum_idx=1"                        </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [10] "102.0548 753.738"                      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [11] "103.00494 385.376"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [12] "103.03531 315.441"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [13] "115.05001 413.206"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [14] "115.08686 588.273"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [15] "120.08063 800.016"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [16] "124.10555 526.761"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [17] "124.20652 326.013"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [18] "1369.57385 1485.17"                    </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [19] "1370.57495 1280.2"                     </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [20] "1387.59021 3038.73"                    </span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by RforMassSpectrometry Package Maintainer, Laurent Gatto, Johannes Rainer, Sebastian Gibb.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


